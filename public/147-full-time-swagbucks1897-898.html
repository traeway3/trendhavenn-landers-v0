<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Swagbucks - Start Earning Today</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#1b1c31" />
  <meta name="description" content="Complete simple tasks and games to earn rewards. Get paid daily!" />
  <link rel="preconnect" href="https://fonts.googleapis.com/">
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg1: #1b1c31;
      --bg2: #0f152e;
      --bg3: #1b1c31;
      --accent: #00FF88;
      --accent2: #00E670;
      --blue: #1c5087;
      --fine: #9ca3af;
      --maxw: 720px;
      --radius: 16px;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      color: #fff;
      font-family: 'Poppins', ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
      background: var(--bg2);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      display: flex;
      flex-direction: column;
    }
    .main-content {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
    }
    .container {
      width: 100%;
      max-width: var(--maxw);
      margin: 0 auto;
      padding: 1rem;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
    }
    .main-image {
      width: 100%;
      height: auto;
      border-radius: var(--radius);
      margin-bottom: 1.5rem;
      object-fit: cover;
      max-height: 250px;
    }
    h1 {
      font-size: 1.8rem;
      font-weight: 800;
      margin: 0 0 0.5rem 0;
      color: #fff;
    }
    .highlight {
      color: var(--accent);
    }
    .sub-headline {
      font-size: 1rem;
      color: var(--fine);
      margin-bottom: 1.5rem;
    }
    .steps-container {
      background-color: var(--bg1);
      border-radius: var(--radius);
      padding: 1.5rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-top: auto; /* Pushes to the bottom */
    }
    .step {
      font-size: 1rem;
      font-weight: 600;
      opacity: 0.5;
      transition: opacity 0.3s ease-in-out;
    }
    .step.active {
      opacity: 1;
    }
    .country-selection, .final-cta {
        width: 100%;
    }
    .country-buttons {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 0.75rem;
    }
    .country-button {
      background-color: var(--blue);
      color: #fff;
      border: 2px solid var(--blue);
      border-radius: 8px;
      padding: 0.75rem;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      text-align: center;
      transition: all 0.2s ease;
    }
    .country-button.selected {
        border-color: var(--accent);
        box-shadow: 0 0 10px var(--accent);
    }
    #go {
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      color: #000;
      border: none;
      border-radius: 8px;
      width: 100%;
      padding: 1rem;
      font-size: 1.2rem;
      font-weight: 700;
      cursor: pointer;
      margin-top: 1rem;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .hidden { display: none; }
    .transition-fade-out {
        animation: fadeOut 0.5s forwards;
    }
    .transition-fade-in {
        animation: fadeIn 0.5s forwards;
    }
    @keyframes fadeOut {
        from { opacity: 1; transform: translateY(0); }
        to { opacity: 0; transform: translateY(-10px); }
    }
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }
    #status {
      font-size: 0.9rem;
      text-align: center;
      color: var(--fine);
      margin-top: 1rem;
    }
  </style>
</head>
<body>
  <div class="main-content">
    <div class="container">
      <img src="swag.png" alt="Earning Rewards" class="main-image">
      <h1>Get Paid For Your Time & <span class="highlight">Opinions</span></h1>
      <p class="sub-headline">Complete simple tasks, play games, and earn daily rewards.</p>
      
      <div class="steps-container">
        <div class="step active" id="step1-country">1) Select your country below</div>
        <div class="step" id="step1-final">2) Click "Start Earning" below</div>
        
        <div id="countrySelection">
            <div class="country-buttons">
                <button class="country-button" data-country="US">ðŸ‡ºðŸ‡¸ United States</button>
                <button class="country-button" data-country="CA">ðŸ‡¨ðŸ‡¦ Canada</button>
                <button class="country-button" data-country="UK">ðŸ‡¬ðŸ‡§ United Kingdom</button>
                <button class="country-button" data-country="AU">ðŸ‡¦ðŸ‡º Australia</button>
            </div>
        </div>

        <div id="finalCta" class="final-cta hidden">
            <button id="go">Start Earning</button>
        </div>

        <p id="status">Checking deviceâ€¦</p>
      </div>
    </div>
  </div>

  <script>
    (function() {
      "use strict";
      const finalLink = "/api/redirect"; // Secure server-side redirect
      const st = document.getElementById('status');
      const countrySelection = document.getElementById('countrySelection');
      const finalCta = document.getElementById('finalCta');
      const countryButtons = document.querySelectorAll('.country-button');
      const goButton = document.getElementById('go');
      const step1Country = document.getElementById('step1-country');
      const step1Final = document.getElementById('step1-final');

      const steps = ["Checking deviceâ€¦", "Routing to offerâ€¦", "Ready!"];
      let i = 0;
      const tick = () => {
        st.textContent = steps[i];
        if (i < steps.length - 1) { i++; setTimeout(tick, 700); }
      };
      tick();

      countryButtons.forEach(button => {
        button.addEventListener('click', function() {
          countryButtons.forEach(btn => btn.classList.remove('selected'));
          this.classList.add('selected');
          goButton.setAttribute('data-link', finalLink);
          
          step1Country.classList.remove('active');
          step1Final.classList.add('active');

          countrySelection.classList.add('transition-fade-out');
          setTimeout(() => {
            countrySelection.classList.add('hidden');
            finalCta.classList.remove('hidden');
            finalCta.classList.add('transition-fade-in');
          }, 500);
        });
      });

      goButton.addEventListener('click', function() {
        const link = this.getAttribute('data-link');
        if (link) { window.location.href = link; }
      }, { passive: true });
    })();
  </script>
</body>
</html>
